<div class="container">
  <h3>AGREGAR UNA PELICULA</h3>
  <div class="row">
    <form [formGroup]="formularioPeliculas" class="example-form">
      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Nombre pelicula</mat-label>
        <input
          type="text"
          matInput
          formControlName="nombre"
          maxlength="70"
          placeholder=""
        />
        <mat-hint
          class="text-danger"
          *ngIf="
            formularioPeliculas.controls['nombre']?.invalid &&
            (formularioPeliculas.controls['nombre']?.dirty ||
              formularioPeliculas.controls['nombre']?.touched)
          "
        >
          <div *ngFor="let validation of VALIDATION_MESSAGES.nombre">
            <span
              *ngIf="
                formularioPeliculas.get('nombre')?.hasError(validation.type) &&
                (formularioPeliculas.get('nombre')?.dirty ||
                  formularioPeliculas.get('nombre')?.touched)
              "
            >
              <strong>{{ validation.message }} </strong>
            </span>
          </div>
        </mat-hint>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Descripci√≥n</mat-label>
        <input
          type="text"
          matInput
          formControlName="descripcion"
          maxlength="300"
          placeholder=""
        />
        <mat-hint
          class="text-danger"
          *ngIf="
            formularioPeliculas.controls['descripcion']?.invalid &&
            (formularioPeliculas.controls['descripcion']?.dirty ||
              formularioPeliculas.controls['descripcion']?.touched)
          "
        >
          <div *ngFor="let validation of VALIDATION_MESSAGES.descripcion">
            <span
              *ngIf="
                formularioPeliculas
                  .get('descripcion')
                  ?.hasError(validation.type) &&
                (formularioPeliculas.get('descripcion')?.dirty ||
                  formularioPeliculas.get('descripcion')?.touched)
              "
            >
              <strong>{{ validation.message }} </strong>
            </span>
          </div>
        </mat-hint>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Precio</mat-label>
        <input type="text" matInput formControlName="precio" placeholder="" />
        <mat-hint
          class="text-danger"
          *ngIf="
            formularioPeliculas.controls['precio']?.invalid &&
            (formularioPeliculas.controls['precio']?.dirty ||
              formularioPeliculas.controls['precio']?.touched)
          "
        >
          <div *ngFor="let validation of VALIDATION_MESSAGES.precio">
            <span
              *ngIf="
                formularioPeliculas.get('precio')?.hasError(validation.type) &&
                (formularioPeliculas.get('precio')?.dirty ||
                  formularioPeliculas.get('precio')?.touched)
              "
            >
              <strong>{{ validation.message }} </strong>
            </span>
          </div>
        </mat-hint>
      </mat-form-field>

      <mat-form-field class="example-full-width" appearance="fill">
        <mat-label>Stock</mat-label>
        <input type="text" matInput formControlName="stock" placeholder="" />
        <mat-hint
          class="text-danger"
          *ngIf="
            formularioPeliculas.controls['stock']?.invalid &&
            (formularioPeliculas.controls['stock']?.dirty ||
              formularioPeliculas.controls['stock']?.touched)
          "
        >
          <div *ngFor="let validation of VALIDATION_MESSAGES.stock">
            <span
              *ngIf="
                formularioPeliculas.get('stock')?.hasError(validation.type) &&
                (formularioPeliculas.get('stock')?.dirty ||
                  formularioPeliculas.get('stock')?.touched)
              "
            >
              <strong>{{ validation.message }} </strong>
            </span>
          </div>
        </mat-hint>
      </mat-form-field>
      <!-- pruebas data binding -->
      <!-- <p>
            {{ formularioContacto.value  | json }}
          </p> -->

      <div class="mb-3 row p-3">
        <button mat-stroked-button color="primary" (click)="onSubmit()">
          GUARDAR
        </button>
      </div>
    </form>
  </div>
</div>

<table
  mat-table
  [dataSource]="listadoPeliculas"
  style="width: 100%"
  class="mat-elevation-z8"
>
  <!-- id Column -->
  <ng-container matColumnDef="id">
    <th mat-header-cell *matHeaderCellDef>No. -</th>
    <td mat-cell *matCellDef="let element">{{ element.id }}</td>
  </ng-container>

  <!-- Name Column -->
  <ng-container matColumnDef="nombre">
    <th mat-header-cell *matHeaderCellDef>Nombre</th>
    <td mat-cell *matCellDef="let element">{{ element.nombre }}</td>
  </ng-container>

  <!-- description Column -->
  <ng-container matColumnDef="descripcion">
    <th mat-header-cell *matHeaderCellDef>Descripcion</th>
    <td mat-cell *matCellDef="let element">{{ element.descripcion }}</td>
  </ng-container>

  <!-- price Column -->
  <ng-container matColumnDef="precio">
    <th mat-header-cell *matHeaderCellDef>Precio</th>
    <td mat-cell *matCellDef="let element">{{ element.precio }}</td>
  </ng-container>

  <ng-container matColumnDef="actions">
    <th mat-header-cell *matHeaderCellDef>Actions</th>
    <mat-cell *matCellDef="let element">
      <button mat-button (click)="editarPelicula(element.id)" data-toggle="modal" data-target="#editor" matTooltip="Edit" aria-label="tooltip"><mat-icon>control_point_duplicate</mat-icon></button>
      <button mat-button (click)="eliminarPelicula(element.id)"><mat-icon>delete_outline</mat-icon></button>
    </mat-cell>
  </ng-container>
  <tr mat-header-row *matHeaderRowDef="displayedColumns"></tr>
  <tr mat-row *matRowDef="let row; columns: displayedColumns"></tr>
</table>


<!-- <pre>
  <div class="container">
    data: 
    {{ formularioPeliculas.value | json }}
  </div>
</pre> -->
